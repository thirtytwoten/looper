<!DOCTYPE HTML> 
<html lang="en"> 
<head>
<title>LOOPER</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta http-equiv="Content-Language" content="en-us">
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.0/socket.io.dev.js"></script>
<script type="text/javascript" src="../serverLink.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>

</head>
<body>

<div id='stationData' data-stations={{stations}}></div>
<div id='userid' data-userid={{userid}}></div>
<h1>CENTRAL</h1>
<a id='urStationLink' href='#'>Go to your station</a>

<h2>STATIONS<h3>
<ul id='stations'></ul>

<script>
  let userid = $('#userid').data('userid');
  let stationData = $('#stationData').data('stations');

  $('#urStationLink').attr('href', `/station/${userid}`);

  function updateStations(stations){
    stations.forEach((s)=>{
      console.log(s);
      $('ul#stations').append(`<li><a href="/station/${s.ownerid}">${s.name}(${s.connectedPeers.length+1})</a></li>`)
    })
  }

  updateStations(stationData);
</script>

</body>
</html>